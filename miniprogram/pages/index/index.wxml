<!--pages/index/index.wxml-->
<view class="container">
  <view class="header">
    <view class="title">心理咨询患者模拟</view>
    <view class="subtitle">选择患者角色开始对话练习</view>
  </view>

  <view class="action-bar">
    <view class="history-btn" bind:tap="goToHistory">
      <text>历史记录</text>
    </view>
  </view>

  <view wx:if="{{loading}}" class="loading">
    <text>加载中...</text>
  </view>

  <view wx:else class="patient-list">
    <view 
      wx:for="{{patients}}" 
      wx:key="_id" 
      class="patient-card"
      data-id="{{item._id}}"
      bind:tap="selectPatient"
    >
      <view class="patient-header">
        <view class="patient-name">{{item.name}}</view>
        <view class="patient-category">{{item.category}}</view>
      </view>
      <view class="patient-description">{{item.description}}</view>
      <view class="patient-symptoms">
        <text wx:for="{{item.symptoms}}" wx:key="*this" class="symptom-tag">{{item}}</text>
      </view>
      <view class="patient-footer">
        <text class="start-chat">开始对话 →</text>
      </view>
    </view>
  </view>

  <view wx:if="{{!loading && patients.length === 0}}" class="empty">
    <text>暂无患者角色，请稍后再试</text>
  </view>
</view>
